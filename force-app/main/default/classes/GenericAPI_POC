public class GenericAPI_POC {
    
    public static void generateJSONforAPI(Id userIdd) {
        
        String userId = userIdd;
        Bank__mdt[] bankMappings = [SELECT Bank_Code__c,SOQL_Query__c, JSON_Map__c, Bank_Name__c FROM Bank__mdt where bank_code__c = : 'HBL'];
        system.debug(bankMappings[0].soql_query__c);
        
        string soqlQuery1 = bankMappings[0].soql_query__c;//.replaceAll(regExp,replacement );//.replaceAll(regExp2, '').replaceAll(regExp3, '');
        system.debug('SOQL 1 ==== '+soqlQuery1);       
        
        User payerUser =Database.query(soqlQuery1); 
        system.debug('pay ' +payerUser);
        
        //Query metadata with key value pairs
        Set<String> metadataTypes = new Set<String>();
        for(String sObjectName: Schema.getGlobalDescribe().keySet()){
            if(sObjectName.endsWith('__mdt')){
                metadataTypes.add(sObjectName);
            }
        }
        
        List<EntityDefinition> entList = [SELECT QualifiedApiName, Label, LastModifiedBy.Name, LastModifiedDate 
                                          FROM EntityDefinition WHERE QualifiedApiName IN :metadataTypes];
        System.debug('entList: ' +entList);
        for(EntityDefinition ent: entList){
            System.debug('QualifiedApiName: ' + ent.QualifiedApiName);
            System.debug('Label: ' + ent.Label);
        }
        
    }
}
